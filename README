// vim: filetype=asciidoc:
= git-configpack =

Content packages for the git runtime

== Installation ==

=== requirements ===

`git`:: The installed version of git should be "recent" (circa 2023). `git-configpack`
 has not been tested with older installations of git.

=== steps ===

1. <<download a release archive>> or <<build a release archive>>
2. Unpack the release archive
  * By convention, this archive should be unpacked in `$HOME/.local/share`
3. Install the release
  * `./git-configpack/install.sh`
4. Validate the installation
  * `git help-configpack`
5. Create a configpack
  * `git configpack-init /tmp/test-configpack`

For more details on building configpacks, see <<Developing Configpacks>>

==== download a release archive ====

See the https://github.com/lottspot/git-configpack/releases[GitHub releases page]

==== build a release archive ====

----
make dist
----

== Developing Configpacks ==

The examples below operate on a tmp configpack named `foo`. Replace the name
and location accordingly.

=== create a new configpack ===

----
git configpack-init /tmp/git-foo
/tmp/git-foo/install.sh
----

To validate the installation and view the core aliases, use the help alias:

----
git help-foo
----

=== add a new alias to a configpack ===

To add an "echo" alias:

----
git foo-newalias foo-echo "!echo"
----

The second argument (`!echo`) is optional, and represents the command which the
alias will be set to. For more information on alias command format, refer to the
`alias.*` entry in `git-config(1)`.

=== add a complex alias as an embedded bash script ===

Aliases which require complex logic, escape sequences, or long sequences of
commands may prove difficult to maintain as values in pack config files.
For such cases, configpacks provide an "exec alias" convention which provides
for executing bash scripts as aliases.

----
git foo-newexecalias foo-script
----

The location of the newly created script will be written to stdout.

=== distributing and installing configpacks ===

A configpack is distributed as a simple file tree, and can thus be packaged and
distributed using any archive format or committed within a project tree. All
configpacks are installed by executing the `install.sh` installer. E.g.,

----
/tmp/git-foo/install.sh
----

=== uninstalling configpacks ===

----
/tmp/git-foo/install.sh --uninstall
----

== Advanced Developer Use Cases ==

See the link:./docs/packdev-reference.adoc[configpack developer reference]
